var Component,Graph,Parameter,Point,Polygon,mathFunctionDictionary,stripBrackets,extend=function(o,n){function t(){this.constructor=o}for(var e in n)hasProp.call(n,e)&&(o[e]=n[e]);return t.prototype=n.prototype,o.prototype=new t,o.__super__=n.prototype,o},hasProp={}.hasOwnProperty;stripBrackets=function(o){return o.replace(/[\[\]\(\)]/g,"")},mathFunctionDictionary=function(o){return o=o.replace(/(?:Math\.)?(E|PI|SQRT2|SQRT1_2|LN2|LN10|LOG2E|LOG10E)/g,"Math.$1"),o=o.replace(/(?:Math\.)?(abs|acos|acosh|asin|asinh|atan|atanh|atan2|cbrt|ceil|clz32|cos|cosh|exp|expm1|floor|fround|hypot|imul|log|log1p|log10|log2|max|min|pow|random|round|sign|sin|sinh|sqrt|tan|tanh|trunc)/gi,"Math.$1")},Component=function(){function o(o,n){this.name=o,this.definition=n,this.obj=null}return o.prototype.generate=function(){throw new Error("Not implemented!")},o}(),Point=function(o){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,o),n.prototype.generate=function(){return this.obj=JSXGen.elements.board.create("point",[this.definition[0],this.definition[1]],{showInfobox:JSXGen.localOptions.point.showInfobox})},n}(Component),Polygon=function(o){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,o),n.prototype.generate=function(){var o,n,t,e,r;for(e=[],r=this.definition,n=0,t=r.length;t>n;n++)o=r[n],e.push(o.obj);if(e.length<3)throw new Error("Error generating polygon. Requires at least 3 points!");return this.obj=JSXGen.elements.board.create("polygon",e)},n}(Component),Graph=function(superClass){function Graph(){return Graph.__super__.constructor.apply(this,arguments)}return extend(Graph,superClass),Graph.prototype.generate=function(){var color,ref;return color=null!=(ref=JSXGen.elements.color[0])?ref:"blue",JSXGen.elements.color.shift(),this.obj=JSXGen.elements.board.create("functiongraph",function(x){return eval(this.def)},{strokeColor:color})},Graph}(Component),Parameter=function(){function o(o,n){this.key=o,this.value=n}return o}(),window.JSXGen||(window.JSXGen={boardOptions:{showCopyright:!1,showNavigation:!0,axis:!0,grid:!0,boundingBox:[-6,6,6,-6],zoom:!1,pan:!1,keepaspectratio:!1},localOptions:{point:{showInfoBox:!0}},elements:{board:null,colors:["blue","red","green","orange","black","grey"],Point:Point,Polygon:Polygon,Graph:Graph},getParams:function(){var o,n,t,e,r,a,i,s;if(n=document.URL.indexOf("?"),i=document.URL.substring(n+1,document.URL.length),i=decodeURI(i),s=[],-1!==n)for(r=i.split("&"),o=0,t=r.length;t>o;o++)a=r[o],e=a.split("="),s.push(new Parameter(e[0],e[1]));return s},initBoard:function(o,n){return this.applyParams(n),this.elements.board=JXG.JSXGraph.initBoard(o,this.boardOptions),this.elements.board},applyParams:function(o){var n,t,e,r,a,i,s;for(e=0,a=o.length;a>e;e++)switch(s=o[e],s.key){case"minx":s.value<this.boardOptions.boundingBox[2]&&(this.boardOptions.boundingBox[0]=s.value);break;case"maxy":s.value>this.boardOptions.boundingBox[3]&&(this.boardOptions.boundingBox[1]=s.value);break;case"maxx":s.value>this.boardOptions.boundingBox[0]&&(this.boardOptions.boundingBox[2]=s.value);break;case"miny":s.value<this.boardOptions.boundingBox[1]&&(this.boardOptions.boundingBox[3]=s.value);break;case"grid":("f"===s.value||"0"===s.value)&&(this.boardOptions.grid=!1);break;case"axis":("f"===s.value||"0"===s.value)&&(this.boardOptions.axis=!1);break;case"colors":for(t=stripBrackets(s.value),t=t.split(","),r=0,i=t.length;i>r;r++)n=t[r],this.elements.colors.unshift(element);break;case"showTCoords":("f"===s.value||"0"===s.value)&&(this.localOptions.point.showInfobox=!1)}return!0}});